Чтобы узнать необходимые значения, выполните следующие шаги:

### 1. Узнайте публичный ключ сервера

Чтобы узнать публичный ключ вашего сервера, выполните команду:

```bash
sudo wg show
```

В выводе этой команды найдите строку `public key` для интерфейса. Это будет публичный ключ вашего сервера. Скопируйте его для использования в конфигурации клиента.

### 3. Убедитесь, что адрес уникален

Чтобы удостовериться, что IP-адрес (например, `10.7.0.3`) уникален, проверьте конфигурационный файл сервера (обычно `wg0.conf`) или используйте команду:

```bash
sudo wg show
```

В выводе вы увидите список IP-адресов, назначенных каждому клиенту. Убедитесь, что новый адрес не совпадает с уже существующими.


Вот пример Bash-скрипта, который автоматически генерирует конфигурацию для нового клиента WireGuard и добавляет данные о новом клиенте в конфигурацию сервера. Скрипт будет принимать аргументы для IP-адреса клиента и публичного ключа сервера.

### Пример скрипта для генерации конфигурации клиента и обновления сервера

Создайте файл, например `generate_wg_client.sh`, и вставьте в него следующий код:

```bash
#!/bin/bash

# Проверка аргументов
if [ "$#" -ne 3 ]; then
    echo "Usage: $0 <client-name> <server-public-key> <server-config-file>"
    exit 1
fi

CLIENT_NAME="$1"
SERVER_PUBLIC_KEY="$2"
SERVER_CONFIG_FILE="$3"
WG_INTERFACE="wg0"  # Имя вашего интерфейса WireGuard
SERVER_ENDPOINT="IP_АДРЕС_СЕРВЕРА:ПОРТ"  # Например, 193.233.84.11:51820

# Генерация ключей
CLIENT_PRIVATE_KEY=$(wg genkey)
CLIENT_PUBLIC_KEY=$(echo $CLIENT_PRIVATE_KEY | wg pubkey)

# Определение IP-адреса для клиента (например, 10.7.0.X)
CLIENT_IP="10.7.0.$((RANDOM % 254 + 1))"  # Генерация случайного IP от 10.7.0.1 до 10.7.0.254

# Создание конфигурационного файла для клиента
cat << EOF > "$CLIENT_NAME.conf"
[Interface]
PrivateKey = $CLIENT_PRIVATE_KEY
Address = $CLIENT_IP/24
DNS = 8.8.8.8, 8.8.4.4

[Peer]
PublicKey = $SERVER_PUBLIC_KEY
Endpoint = $SERVER_ENDPOINT
AllowedIPs = 0.0.0.0/0, ::/0
PersistentKeepalive = 25
EOF

echo "Конфигурация клиента успешно создана: $CLIENT_NAME.conf"
echo "Публичный ключ клиента: $CLIENT_PUBLIC_KEY"

```

### Использование скрипта

1. Сохраните файл `generate_wg_client.sh`.

2. Сделайте его исполняемым:

   ```bash
   chmod +x generate_wg_client.sh
   ```

3. Запустите скрипт с указанием имени клиента, публичного ключа сервера и конфигурационного файла сервера:

   ```bash
   ./generate_wg_client.sh <client-name> <server-public-key> <server-config-file>
   ```

   Например:

   ```bash
   ./generate_wg_client.sh client1 YOUR_SERVER_PUBLIC_KEY /etc/wireguard/wg0.conf
   ```

### Вывод

После выполнения скрипта будет создан файл конфигурации клиента с именем `<client-name>.conf`, добавлены данные о новом клиенте в конфигурацию сервера, а WireGuard будет перезапущен для применения изменений. Публичный ключ клиента будет выведен в терминале для дальнейшего использования.

При необходимости нужно сменить IP адреса у клиентского конфига и серверного
